% Copyright (c) 2023-2024 Isaac Ren. Licensed under the MIT license (see LICENSE.txt).

\NeedsTeXFormat{LaTeX2e}
\mode<presentation>

% Requirements
\RequirePackage{tikz}
\RequirePackage{graphicx}
\RequirePackage{adjustbox}
\RequirePackage{calc}

\graphicspath{ {kthpq-files/figs/} }

% Settings
\newlength{\smalllogowidth}
\setlength{\smalllogowidth}{17mm}
\newlength{\outermargin}
\setlength{\outermargin}{\smalllogowidth/3}

% OUTER THEME
% header, footer, frame title, etc.

\setbeamertemplate{navigation symbols}{}
\setbeamersize{text margin left=2\outermargin, text margin right=2\outermargin}

% HEADLINE
\setbeamerfont{headline}{size=\footnotesize, shape=\normalfont}

\defbeamertemplate{headline}{KTH-full}{%
\donotcoloroutermaths
\vspace*{\outermargin}
\begin{beamercolorbox}[wd=.5\paperwidth, dp=\outermargin]{section in head/foot}
\hspace*{\outermargin}%
\includegraphics[width=\smalllogowidth]{logo/KTH_logo_RGB_bla.pdf}%
\hspace*{\outermargin}%
\parbox[b][\smalllogowidth][c]{\dimexpr\paperwidth-\smalllogowidth-3\outermargin\relax}{%
\raggedright \usebeamerfont{section in head/foot} \insertsection%
}%
\end{beamercolorbox}
}

\setbeamertemplate{headline}[KTH-full]

% FOOTLINE

% Define a new footline template with entries left, center, and right
\newcommand*{\deffootline}[4]{%
\defbeamertemplate{footline}{#1}{%
\donotcoloroutermaths
\begin{beamercolorbox}[dp=\outermargin]{footline}%
\hspace*{\outermargin}%
\rlap{#2}%
\hfill
#3
\hfill
\llap{#4}%
\hspace*{\outermargin}%
\end{beamercolorbox}%
}%
}

% Set the footline template with entries left, center, and right
\newcommand*{\setfootline}[3]{%
\setbeamertemplate{footline}{%
\donotcoloroutermaths
\begin{beamercolorbox}[dp=\outermargin]{footline}%
\hspace*{\outermargin}%
\rlap{#1}%
\hfill
#2
\hfill
\llap{#3}%
\hspace*{\outermargin}%
\end{beamercolorbox}%
}%
}

\deffootline{KTH-full}{\insertshortauthor}{\insertshortinstitute}{\insertframenumber/\inserttotalframenumber}

\setbeamertemplate{footline}[KTH-full]

% FRAME
\setbeamertemplate{frametitle}{%
\insertframetitle%
}


\mode<all>